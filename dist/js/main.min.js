document.addEventListener("DOMContentLoaded",()=>{let t=1,n=3,a=document.getElementById("load_more"),d=document.getElementById("load_more_container"),o=document.getElementById("sort_by"),c=document.getElementById("genre"),l=document.getElementById("start_date"),s=document.getElementById("end_date"),e=document.getElementById("apply_filters");function r(e){e&&(t=1,n=0,d.innerHTML="",a.style.display="block");e=new FormData;e.append("action","axaj_sort_movies"),e.append("nonce",ajax_data.nonce),e.append("page",t),e.append("offset",n),e.append("sort_by",o.value),e.append("genre",c.value),e.append("start_date",l.value),e.append("end_date",s.value),fetch(ajax_data.ajax_url,{method:"POST",body:e}).then(e=>e.text()).then(e=>{(e.includes("No more movies")||(d.insertAdjacentHTML("beforeend",e),t++,n+=3,(e.match(/<article/g)||[]).length<3))&&(a.style.display="none")}).catch(e=>console.error("Error:",e))}a.addEventListener("click",()=>r()),o.addEventListener("change",()=>r("newRequest")),e.addEventListener("click",()=>r("newRequest"));let m=document.getElementById("mobile_menu_btn"),i=document.getElementById("menu_wrapper");m.addEventListener("click",function(){m&&i&&(m.classList.contains("active-btn")?(m.classList.remove("active-btn"),m.classList.add("deactivate-btn"),document.querySelector("html").style.overflow="auto"):(m.classList.add("active-btn"),m.classList.remove("deactivate-btn"),document.querySelector("html").style.overflow="hidden"),i.classList.toggle("active-menu"))})});